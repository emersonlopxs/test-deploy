{"version":3,"sources":["../../src/core/openapi-validator.js"],"names":["oasValidator","oasMiddleware","apiSpec","swaggerDoc","validateRequests","validateResponses","oasMiddlewareWithExposableErrorModifier","error","req","res","next","ExposableError","JSON","stringify","message","errors","use"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEO,MAAMA,YAAY,GAAG,sBAArB;;AAEP,MAAMC,aAAa,GAAG,yCAAW;AAC/BC,EAAAA,OAAO,EAAEC,mBADsB;AAE/BC,EAAAA,gBAAgB,EAAE,IAFa;AAG/BC,EAAAA,iBAAiB,EAAE;AAHY,CAAX,CAAtB;AAMA,MAAMC,uCAAuC,GAAG,CAC9C,GAAGL,aAD2C,EAE9C,CAACM,KAAD,EAAQC,GAAR,EAAaC,GAAb,EAAkBC,IAAlB,KAA2B;AACzBA,EAAAA,IAAI,CACF,IAAIC,sBAAJ,CACEC,IAAI,CAACC,SAAL,CACE;AACEC,IAAAA,OAAO,EAAEP,KAAK,CAACO,OADjB;AAEEC,IAAAA,MAAM,EAAER,KAAK,CAACQ;AAFhB,GADF,EAKE,GALF,CADF,CADE,CAAJ;AAWD,CAd6C,CAAhD;AAiBAf,YAAY,CAACgB,GAAb,CAAiBV,uCAAjB","sourcesContent":["import { Router } from \"express\";\nimport { middleware } from \"express-openapi-validator\";\nimport { swaggerDoc } from \"./swagger\";\nimport { ExposableError } from \"../errors\";\n\nexport const oasValidator = Router();\n\nconst oasMiddleware = middleware({\n  apiSpec: swaggerDoc,\n  validateRequests: true,\n  validateResponses: true,\n});\n\nconst oasMiddlewareWithExposableErrorModifier = [\n  ...oasMiddleware,\n  (error, req, res, next) => {\n    next(\n      new ExposableError(\n        JSON.stringify(\n          {\n            message: error.message,\n            errors: error.errors,\n          },\n          400\n        )\n      )\n    );\n  },\n];\n\noasValidator.use(oasMiddlewareWithExposableErrorModifier);\n"],"file":"openapi-validator.js"}