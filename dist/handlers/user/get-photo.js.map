{"version":3,"sources":["../../../src/handlers/user/get-photo.js"],"names":["getPhoto","userId","blobServiceClient","BlobServiceClient","fromConnectionString","AZURE_STORAGE_CONNECTION_STRING","containerClient","getContainerClient","blockBlobClient","getBlockBlobClient","toString","downloadResponse","download","photoBuffer","readableStreamBody"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEO,MAAMA,QAAQ,GAAG,MAAMC,MAAN,IAAgB;AACtC,QAAMC,iBAAiB,GAAGC,+BAAkBC,oBAAlB,CAAuCC,uCAAvC,CAA1B;;AACA,QAAMC,eAAe,GAAGJ,iBAAiB,CAACK,kBAAlB,CAAqC,aAArC,CAAxB;AACA,QAAMC,eAAe,GAAGF,eAAe,CAACG,kBAAhB,CAAmCR,MAAM,CAACS,QAAP,EAAnC,CAAxB;AACA,QAAMC,gBAAgB,GAAG,MAAMH,eAAe,CAACI,QAAhB,EAA/B;AACA,QAAMC,WAAW,GAAG,MAAM,4BAAeF,gBAAgB,CAACG,kBAAhC,CAA1B;AACA,SAAOD,WAAP;AACD,CAPM","sourcesContent":["import { BlobServiceClient } from \"@azure/storage-blob\";\nimport { AZURE_STORAGE_CONNECTION_STRING } from \"~/core/config\";\nimport { streamToBuffer } from \"~/helpers/buffer\";\n\nexport const getPhoto = async userId => {\n  const blobServiceClient = BlobServiceClient.fromConnectionString(AZURE_STORAGE_CONNECTION_STRING);\n  const containerClient = blobServiceClient.getContainerClient(\"user-photos\");\n  const blockBlobClient = containerClient.getBlockBlobClient(userId.toString());\n  const downloadResponse = await blockBlobClient.download();\n  const photoBuffer = await streamToBuffer(downloadResponse.readableStreamBody);\n  return photoBuffer;\n};\n"],"file":"get-photo.js"}