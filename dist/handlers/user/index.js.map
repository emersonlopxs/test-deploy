{"version":3,"sources":["../../../src/handlers/user/index.js"],"names":["router","post","req","res","next","body","then","status","end","catch","data","json","get","auth","id","send","put","photo","delete"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEO,MAAMA,MAAM,GAAG,sBAAf;;AAEPA,MAAM,CAACC,IAAP,CAAY,iBAAZ,EAA+B,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC7B,oCAAeF,GAAG,CAACG,IAAnB,EACGC,IADH,CACQ,MAAMH,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,GAAhB,EADd,EAEGC,KAFH,CAESL,IAFT,CADF;AAMAJ,MAAM,CAACC,IAAP,CAAY,gBAAZ,EAA8B,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC5B,kCAAcF,GAAG,CAACG,IAAlB,EACGC,IADH,CACQI,IAAI,IAAIP,GAAG,CAACQ,IAAJ,CAASD,IAAT,CADhB,EAEGD,KAFH,CAESL,IAFT,CADF;AAMAJ,MAAM,CAACY,GAAP,CAAW,QAAX,EAAqBC,UAArB,EAA2B,CAACX,GAAD,EAAMC,GAAN,EAAWC,IAAX,KACzB,wBAASF,GAAG,CAACW,IAAJ,CAASC,EAAlB,EACGR,IADH,CACQI,IAAI,IAAIP,GAAG,CAACY,IAAJ,CAASL,IAAT,CADhB,EAEGD,KAFH,CAESL,IAFT,CADF;AAMAJ,MAAM,CAACgB,GAAP,CAAW,QAAX,EAAqBH,UAArB,EAA2B,CAACX,GAAD,EAAMC,GAAN,EAAWC,IAAX,KACzB,4BAAeF,GAAf,EAAoBI,IAApB,CAAyBW,KAAK,IAC5B,wBAASf,GAAG,CAACW,IAAJ,CAASC,EAAlB,EAAsBG,KAAtB,EACGX,IADH,CACQ,MAAMH,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,GAAhB,EADd,EAEGC,KAFH,CAESL,IAFT,CADF,CADF;AAQAJ,MAAM,CAACkB,MAAP,CAAc,QAAd,EAAwBL,UAAxB,EAA8B,CAACX,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC5B,8BAAYF,GAAG,CAACW,IAAJ,CAASC,EAArB,EACGR,IADH,CACQ,MAAMH,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,GAAhB,EADd,EAEGC,KAFH,CAESL,IAFT,CADF","sourcesContent":["import { Router } from \"express\";\nimport { auth } from \"~/core/auth\";\nimport { streamToBuffer } from \"~/helpers/buffer\";\nimport { resetPassword } from \"./reset-password\";\nimport { changePassword } from \"./change-password\";\nimport { getPhoto } from \"./get-photo\";\nimport { putPhoto } from \"./put-photo\";\nimport { deletePhoto } from \"./delete-photo\";\n\nexport const router = Router();\n\nrouter.post(\"/changepassword\", (req, res, next) =>\n  changePassword(req.body)\n    .then(() => res.status(204).end())\n    .catch(next)\n);\n\nrouter.post(\"/resetpassword\", (req, res, next) =>\n  resetPassword(req.body)\n    .then(data => res.json(data))\n    .catch(next)\n);\n\nrouter.get(\"/photo\", auth, (req, res, next) =>\n  getPhoto(req.auth.id)\n    .then(data => res.send(data))\n    .catch(next)\n);\n\nrouter.put(\"/photo\", auth, (req, res, next) =>\n  streamToBuffer(req).then(photo =>\n    putPhoto(req.auth.id, photo)\n      .then(() => res.status(201).end())\n      .catch(next)\n  )\n);\n\nrouter.delete(\"/photo\", auth, (req, res, next) =>\n  deletePhoto(req.auth.id)\n    .then(() => res.status(204).end())\n    .catch(next)\n);\n"],"file":"index.js"}