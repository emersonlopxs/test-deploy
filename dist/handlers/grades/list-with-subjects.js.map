{"version":3,"sources":["../../../src/handlers/grades/list-with-subjects.js"],"names":["transform","data","rows","reduce","list","item","index","filter","subject","id","gradeId","formattedItem","subjectId","name","subjectName","color","subjectColor","length","subjects","push","gradeName","listWithSubjects","params","models","grades","then"],"mappings":";;;;;;;;;AAAA;;AAEA,MAAMA,SAAS,GAAGC,IAAI,KAAK,EACzB,GAAGA,IADsB;AAEzBC,EAAAA,IAAI,EAAED,IAAI,CAACC,IAAL,CAAUC,MAAV,CAAiB,CAACC,IAAD,EAAOC,IAAP,KAAgB;AACrC,UAAMC,KAAK,GAAGF,IAAI,CAACG,MAAL,CAAYC,OAAO,IAAIA,OAAO,CAACC,EAAR,KAAeJ,IAAI,CAACK,OAA3C,CAAd;AAEA,UAAMC,aAAa,GAAG;AACpBF,MAAAA,EAAE,EAAEJ,IAAI,CAACO,SADW;AAEpBC,MAAAA,IAAI,EAAER,IAAI,CAACS,WAFS;AAGpBC,MAAAA,KAAK,EAAEV,IAAI,CAACW;AAHQ,KAAtB;;AAMA,QAAIV,KAAK,CAACW,MAAN,KAAiB,CAArB,EAAwB;AACtBX,MAAAA,KAAK,CAAC,CAAD,CAAL,CAASY,QAAT,CAAkBC,IAAlB,CAAuBR,aAAvB;AACD,KAFD,MAEO;AACLP,MAAAA,IAAI,CAACe,IAAL,CAAU;AACRV,QAAAA,EAAE,EAAEJ,IAAI,CAACK,OADD;AAERG,QAAAA,IAAI,EAAER,IAAI,CAACe,SAFH;AAGRF,QAAAA,QAAQ,EAAE,CAACP,aAAD;AAHF,OAAV;AAKD;;AACD,WAAOP,IAAP;AACD,GAnBK,EAmBH,EAnBG;AAFmB,CAAL,CAAtB;;AAwBO,MAAMiB,gBAAgB,GAAGC,MAAM,IAAIC,MAAM,CAACC,MAAP,CAAcH,gBAAd,CAA+BC,MAA/B,EAAuCG,IAAvC,CAA4CzB,SAA5C,CAAnC","sourcesContent":["import * as models from \"~/models\";\n\nconst transform = data => ({\n  ...data,\n  rows: data.rows.reduce((list, item) => {\n    const index = list.filter(subject => subject.id === item.gradeId);\n\n    const formattedItem = {\n      id: item.subjectId,\n      name: item.subjectName,\n      color: item.subjectColor,\n    };\n\n    if (index.length === 1) {\n      index[0].subjects.push(formattedItem);\n    } else {\n      list.push({\n        id: item.gradeId,\n        name: item.gradeName,\n        subjects: [formattedItem],\n      });\n    }\n    return list;\n  }, []),\n});\n\nexport const listWithSubjects = params => models.grades.listWithSubjects(params).then(transform);\n"],"file":"list-with-subjects.js"}