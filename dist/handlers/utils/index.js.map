{"version":3,"sources":["../../../src/handlers/utils/index.js"],"names":["router","get","auth","req","res","next","query","then","data","json","catch","post","body","status","end","reqAdmin","params"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEO,MAAMA,MAAM,GAAG,sBAAf;;AAGPA,MAAM,CAACC,GAAP,CAAW,SAAX,EAAsBC,UAAtB,EAA4B,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC1B,4BAAWF,GAAG,CAACG,KAAf,EACGC,IADH,CACQC,IAAI,IAAIJ,GAAG,CAACK,IAAJ,CAASD,IAAT,CADhB,EAEGE,KAFH,CAESL,IAFT,CADF;AAMAL,MAAM,CAACW,IAAP,CAAY,SAAZ,EAAuBT,UAAvB,EAA6B,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC3B,gCAAaF,GAAG,CAACS,IAAjB,EACGL,IADH,CACQ,MAAMH,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,GAAhB,EADd,EAEGJ,KAFH,CAESL,IAFT,CADF;AAMAL,MAAM,CAACC,GAAP,CAAW,WAAX,EAAwBC,UAAxB,EAA8Ba,cAA9B,EAAwC,CAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,KACtC,gCAAaF,GAAG,CAACG,KAAjB,EACGC,IADH,CACQC,IAAI,IAAIJ,GAAG,CAACK,IAAJ,CAASD,IAAT,CADhB,EAEGE,KAFH,CAESL,IAFT,CADF;AAMAL,MAAM,CAACW,IAAP,CAAY,WAAZ,EAAyBT,UAAzB,EAA+B,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC7B,oCAAeF,GAAG,CAACS,IAAnB,EACGL,IADH,CACQ,MAAMH,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,GAAhB,EADd,EAEGJ,KAFH,CAESL,IAFT,CADF;AAMAL,MAAM,CAACC,GAAP,CAAW,eAAX,EAA4B,CAACE,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC1B,8BAAYF,GAAG,CAACG,KAAhB,EACGC,IADH,CACQC,IAAI,IAAIJ,GAAG,CAACK,IAAJ,CAASD,IAAT,CADhB,EAEGE,KAFH,CAESL,IAFT,CADF;AAMAL,MAAM,CAACC,GAAP,CAAW,gBAAX,EAA6B,CAACE,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC3B,4BAAWF,GAAG,CAACa,MAAf,EACGT,IADH,CACQC,IAAI,IAAIJ,GAAG,CAACK,IAAJ,CAASD,IAAT,CADhB,EAEGE,KAFH,CAESL,IAFT,CADF;AAMAL,MAAM,CAACC,GAAP,CAAW,uBAAX,EAAoC,CAACE,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAClC,8BAAYF,GAAG,CAACa,MAAhB,EACGT,IADH,CACQC,IAAI,IAAIJ,GAAG,CAACK,IAAJ,CAASD,IAAT,CADhB,EAEGE,KAFH,CAESL,IAFT,CADF;AAMAL,MAAM,CAACC,GAAP,CAAW,6BAAX,EAA0C,CAACE,GAAD,EAAMC,GAAN,EAAWC,IAAX,KACxC,8BAAYF,GAAG,CAACa,MAAhB,EACGT,IADH,CACQC,IAAI,IAAIJ,GAAG,CAACK,IAAJ,CAASD,IAAT,CADhB,EAEGE,KAFH,CAESL,IAFT,CADF","sourcesContent":["import { Router } from \"express\";\nimport { auth, reqAdmin } from \"~/core/auth\";\nimport { listAccesses } from \"./list-accesses\";\nimport { insertAccesses } from \"./insert-accesses\";\nimport { urlMetadata } from \"./get-metadata\";\nimport { listCities } from \"./list-cities\";\nimport { listSchools } from \"./list-schools\";\nimport { insertErrors } from \"./insert-errors\";\nimport { listErrors } from \"./list-errors\";\n\nexport const router = Router();\nexport { listAccesses, insertAccesses, urlMetadata, listCities, listSchools, insertErrors };\n\nrouter.get(\"/errors\", auth, (req, res, next) =>\n  listErrors(req.query)\n    .then(data => res.json(data))\n    .catch(next)\n);\n\nrouter.post(\"/errors\", auth, (req, res, next) =>\n  insertErrors(req.body)\n    .then(() => res.status(201).end())\n    .catch(next)\n);\n\nrouter.get(\"/accesses\", auth, reqAdmin, (req, res, next) =>\n  listAccesses(req.query)\n    .then(data => res.json(data))\n    .catch(next)\n);\n\nrouter.post(\"/accesses\", auth, (req, res, next) =>\n  insertAccesses(req.body)\n    .then(() => res.status(201).end())\n    .catch(next)\n);\n\nrouter.get(\"/url/metadata\", (req, res, next) =>\n  urlMetadata(req.query)\n    .then(data => res.json(data))\n    .catch(next)\n);\n\nrouter.get(\"/cities/:state\", (req, res, next) =>\n  listCities(req.params)\n    .then(data => res.json(data))\n    .catch(next)\n);\n\nrouter.get(\"/schools/:state/:city\", (req, res, next) =>\n  listSchools(req.params)\n    .then(data => res.json(data))\n    .catch(next)\n);\n\nrouter.get(\"/schools/:state/:city/:type\", (req, res, next) =>\n  listSchools(req.params)\n    .then(data => res.json(data))\n    .catch(next)\n);\n"],"file":"index.js"}