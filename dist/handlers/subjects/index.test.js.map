{"version":3,"sources":["../../../src/handlers/subjects/index.test.js"],"names":["jest","mock","describe","exemplo1","name","color","exemplo2","exemplo3","table","models","subjects","get","mockImplementation","params","query","limit","offset","filter","item","includes","slice","list","insert","row","id","length","userId","createdAt","Date","modifiedAt","push","update","index","findIndex","Error","remove","splice","it","handler","first","second","thrid","expect","toBe"],"mappings":"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","sourcesContent":["\nimport \"dotenv/config\";\nimport * as handler from \"./index\";\nimport * as models from \"~/models\";\n\njest.mock(\"~/models/subjects\");\n\ndescribe(\"Mentors tests\", () => {\n  const exemplo1 = {\n    name: \"Matemática\",\n    color: \"#1A2B3C\",\n  };\n\n  const exemplo2 = {\n    name: \"Ciências\",\n    color: \"#1A2B3C\",\n  };\n\n  const exemplo3 = {\n    name: \"Língua Portuguesa\",\n    color: \"#1A2B3C\",\n  };\n\n  const table = [];\n\n  models.subjects.get.mockImplementation(async params => {\n    const { query, limit, offset } = params;\n\n    return table.filter(item => item.name.includes(query)).slice(offset, limit + offset);\n  });\n\n  models.subjects.list.mockImplementation(async params => {\n    const { query, limit = 10, offset = 0 } = params;\n\n    if (query) return table.filter(item => item.name.includes(query)).slice(offset, limit + offset);\n    return table.slice(offset, limit + offset);\n  });\n\n  models.subjects.insert.mockImplementation(async row => {\n    const id = table.length + 1;\n    const userId = id * 10;\n    const createdAt = new Date();\n    const modifiedAt = new Date();\n    table.push({ ...row, id, userId, createdAt, modifiedAt });\n    return id;\n  });\n\n  models.subjects.update.mockImplementation(async row => {\n    const { id } = row;\n    const modifiedAt = new Date();\n\n    // I want to keep the order of the array\n    const index = table.findIndex(item => item.id === id);\n    if (index < 0) throw new Error(`Item with Id ${id} not found on the table`);\n\n    table[index] = { ...table[index], ...row, modifiedAt };\n  });\n\n  models.subjects.remove.mockImplementation(async row => {\n    const { id } = row;\n\n    // I want to keep the order of the array\n    const index = table.findIndex(item => item.id === id);\n    if (index < 0) throw new Error(`Item with Id ${id} not found on the table`);\n\n    table.splice(index, 1);\n  });\n\n  it(\"Insert\", async () => {\n    exemplo1.id = await handler.insert(exemplo1);\n    exemplo2.id = await handler.insert(exemplo2);\n    exemplo3.id = await handler.insert(exemplo3);\n\n    const [first, second, thrid] = table;\n\n    expect(first.name).toBe(exemplo1.name);\n    expect(second.name).toBe(exemplo2.name);\n    expect(thrid.name).toBe(exemplo3.name);\n  });\n\n  it(\"Update exemplos\", async () => {\n    await handler.update({ ...exemplo1 });\n    await handler.update({ ...exemplo2 });\n    await handler.update({ ...exemplo3 });\n\n    const [first, second, thrid] = table;\n\n    expect(first.name).toBe(exemplo1.name);\n    expect(second.name).toBe(exemplo2.name);\n    expect(thrid.name).toBe(exemplo3.name);\n  });\n\n  it(\"List test: limit 1 offset 0\", async () => {\n    const [first] = await handler.list({ limit: 1 });\n\n    expect(first.name).toBe(exemplo1.name);\n  });\n\n  it(\"List test: limit 2 offset 0\", async () => {\n    const [first, second] = await handler.list({ limit: 2 });\n\n    expect(first.name).toBe(exemplo1.name);\n    expect(second.name).toBe(exemplo2.name);\n  });\n\n  it(\"List test: limit 1 offset 2\", async () => {\n    const [thrid] = await handler.list({ limit: 1, offset: 2 });\n\n    expect(thrid.name).toBe(exemplo3.name);\n  });\n\n  it(\"Removing exists\", async () => {\n    await handler.remove({ id: exemplo1.id });\n    expect(table.length).toBe(2);\n\n    await handler.remove({ id: exemplo2.id });\n    expect(table.length).toBe(1);\n\n    await handler.remove({ id: exemplo3.id });\n    expect(table.length).toBe(0);\n  });\n});\n"],"file":"index.test.js"}