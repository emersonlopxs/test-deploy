{"version":3,"sources":["../../../src/handlers/classes/insert.js"],"names":["matchYoutubeUrl","url","pattern","matchResult","match","postNewClass","contents","others","map","content","type","insert","params","authId","then","value","models","classes"],"mappings":";;;;;;;;;AAAA;;AAEA,SAASA,eAAT,CAAyBC,GAAzB,EAA8B;AAC5B,QAAMC,OAAO,GAAG,0HAAhB;AACA,QAAMC,WAAW,GAAGF,GAAG,CAACG,KAAJ,CAAUF,OAAV,CAApB;;AACA,MAAIC,WAAJ,EAAiB;AACf,WAAOA,WAAW,CAAC,CAAD,CAAlB;AACD;;AACD,SAAO,IAAP;AACD;;AAED,MAAME,YAAY,GAAG,OAAO;AAAEC,EAAAA,QAAF;AAAY,KAAGC;AAAf,CAAP,MAAoC;AACvDD,EAAAA,QAAQ,EAAEA,QAAQ,CAACE,GAAT,CAAaC,OAAO,KAAK,EAAE,GAAGA,OAAL;AAAcC,IAAAA,IAAI,EAAEV,eAAe,CAACS,OAAO,CAACR,GAAT,CAAf,GAA+B,SAA/B,GAA2C;AAA/D,GAAL,CAApB,CAD6C;AAEvD,KAAGM;AAFoD,CAApC,CAArB;;AAKO,MAAMI,MAAM,GAAG,CAACC,MAAD,EAASC,MAAT,KAAoBR,YAAY,CAACO,MAAD,CAAZ,CAAqBE,IAArB,CAA0BC,KAAK,IAAIC,MAAM,CAACC,OAAP,CAAeN,MAAf,CAAsBI,KAAtB,EAA6BF,MAA7B,CAAnC,CAAnC","sourcesContent":["import * as models from \"~/models\";\n\nfunction matchYoutubeUrl(url) {\n  const pattern = /^(?:https?:\\/\\/)?(?:m\\.|www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\n  const matchResult = url.match(pattern);\n  if (matchResult) {\n    return matchResult[1];\n  }\n  return null;\n}\n\nconst postNewClass = async ({ contents, ...others }) => ({\n  contents: contents.map(content => ({ ...content, type: matchYoutubeUrl(content.url) ? \"youtube\" : \"link\"})),\n  ...others,\n});\n\nexport const insert = (params, authId) => postNewClass(params).then(value => models.classes.insert(value, authId));\n"],"file":"insert.js"}