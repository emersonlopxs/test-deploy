{"version":3,"sources":["../../../src/models/dashboard/list.js"],"names":["list","params","from","to","Date","dashboardSqls","JSON","parse","stringify","sqls","ret","Promise","all","Object","keys","map","value","title","count"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEO,MAAMA,IAAI,GAAG,MAAMC,MAAN,IAAgB;AAClC,MAAI;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAeF,MAAnB;AAEA,MAAI,CAACC,IAAL,EAAWA,IAAI,GAAG,IAAIE,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAP;AACX,MAAI,CAACD,EAAL,EAASA,EAAE,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL;AAET,QAAMC,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeC,IAAf,CAAX,CAAtB;AAEA,QAAMC,GAAG,GAAG,MAAMC,OAAO,CAACC,GAAR,CAChBC,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,GAAlB,CAAsB,MAAMC,KAAN,IAAe;AACnC,WAAO;AACLC,MAAAA,KAAK,EAAED,KADF;AAELA,MAAAA,KAAK,EAAE,CACL,MAAM,qBACH;AACb;AACA;AACA,kBAAkBX,aAAa,CAACW,KAAD,CAAQ;AACvC;AACA,aANgB,EAOJ,CAACd,IAAD,EAAOC,EAAP,CAPI,CADD,EAULe;AAZG,KAAP;AAcD,GAfD,CADgB,CAAlB;AAmBA,SAAOR,GAAP;AACD,CA5BM","sourcesContent":["import * as sqls from \"./sqls\";\nimport { first } from \"~/core/database\";\n\nexport const list = async params => {\n  let { from, to } = params;\n\n  if (!from) from = new Date(2000, 1, 1);\n  if (!to) to = new Date(3000, 1, 1);\n\n  const dashboardSqls = JSON.parse(JSON.stringify(sqls));\n\n  const ret = await Promise.all(\n    Object.keys(sqls).map(async value => {\n      return {\n        title: value,\n        value: (\n          await first(\n            `\n              select count(1) as count\n              from (\n                ${dashboardSqls[value]}\n              ) as totalRowsCount\n            `,\n            [from, to]\n          )\n        ).count,\n      };\n    })\n  );\n\n  return ret;\n};\n"],"file":"list.js"}