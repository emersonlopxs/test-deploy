{"version":3,"sources":["../../../src/models/dashboard/get-xls.js"],"names":["getXls","params","res","name","from","to","Date","stringifier","options","header","sql","JSON","parse","stringify","sqls"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AAEO,MAAMA,MAAM,GAAG,OAAOC,MAAP,EAAeC,GAAf,KAAuB;AAC3C,QAAM;AAAEC,IAAAA;AAAF,MAAWF,MAAjB;AACA,MAAI;AAAEG,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAeJ,MAAnB;AAEA,MAAI,CAACG,IAAL,EAAWA,IAAI,GAAG,IAAIE,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAP;AACX,MAAI,CAACD,EAAL,EAASA,EAAE,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL;AAET,QAAMC,WAAW,GAAG,4BAApB;AACAA,EAAAA,WAAW,CAACC,OAAZ,CAAoBC,MAApB,GAA6B,IAA7B;AAEA,QAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeC,IAAf,CAAX,EAAiCX,IAAjC,CAAZ;AACA,SAAO,oBAAKO,GAAL,EAAU,CAACN,IAAD,EAAOC,EAAP,CAAV,EAAsBE,WAAtB,EAAmCL,GAAnC,CAAP;AACD,CAZM","sourcesContent":["import stringify from \"csv-stringify\";\nimport { pipe } from \"~/core/database\";\nimport * as sqls from \"./sqls\";\n\nexport const getXls = async (params, res) => {\n  const { name } = params;\n  let { from, to } = params;\n\n  if (!from) from = new Date(2000, 1, 1);\n  if (!to) to = new Date(3000, 1, 1);\n\n  const stringifier = stringify();\n  stringifier.options.header = true;\n\n  const sql = JSON.parse(JSON.stringify(sqls))[name];\n  return pipe(sql, [from, to], stringifier, res);\n};\n"],"file":"get-xls.js"}