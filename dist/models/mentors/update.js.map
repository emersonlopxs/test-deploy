{"version":3,"sources":["../../../src/models/mentors/update.js"],"names":["update","userId","name","password","trans","Promise","all","helpers","hash"],"mappings":";;;;;;;;;AACA;;AACA;;AAEO,MAAMA,MAAM,GAAG,OAAO;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,IAAV;AAAgBC,EAAAA;AAAhB,CAAP,KACpB,gCAAiBC,KAAK,IACpBC,OAAO,CAACC,GAAR,CAAY,CACV,YAAY;AACV,MAAIH,QAAJ,EACEC,KAAK,CAACJ,MAAN,CACG;AACb;AACA,aAHU,EAIE,CAAC,MAAMO,OAAO,CAACJ,QAAR,CAAiBK,IAAjB,CAAsBL,QAAtB,CAAP,EAAwCF,MAAxC,CAJF;AAMH,CATS,EAUVG,KAAK,CAACJ,MAAN,CACG;AACT;AACA;AACA;AACA;AACA,SANM,EAOE,CAACE,IAAD,EAAOD,MAAP,CAPF,CAVU,CAAZ,CADF,CADK","sourcesContent":["\nimport { beginTransaction } from \"~/core/database\";\nimport * as helpers from \"~/helpers\";\n\nexport const update = async ({ userId, name, password }) =>\n  beginTransaction(trans =>\n    Promise.all([\n      async () => {\n        if (password)\n          trans.update(\n            `\n              update users SET password = ? where id = ?\n            `,\n            [await helpers.password.hash(password), userId]\n          );\n      },\n      trans.update(\n        `\n          update mentors\n            set name = ?\n            , modifiedAt = now()\n          where userId = ?\n        `,\n        [name, userId]\n      ),\n    ])\n  );\n"],"file":"update.js"}