{"version":3,"sources":["../../../src/models/admins/update.js"],"names":["update","userId","name","password","trans","helpers","hash"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEO,MAAMA,MAAM,GAAG,OAAO;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,IAAV;AAAgBC,EAAAA;AAAhB,CAAP,KAAsC;AAC1D,QAAM,gCAAiB,MAAMC,KAAN,IAAe;AACpC,QAAID,QAAJ,EAAc;AACZC,MAAAA,KAAK,CAACJ,MAAN,CACG;AACT;AACA,SAHM,EAIE,CAAC,MAAMK,OAAO,CAACF,QAAR,CAAiBG,IAAjB,CAAsBH,QAAtB,CAAP,EAAwCF,MAAxC,CAJF;AAMD;;AAED,UAAMG,KAAK,CAACJ,MAAN,CACH;AACP;AACA;AACA;AACA;AACA,OANU,EAOJ,CAACE,IAAD,EAAOD,MAAP,CAPI,CAAN;AASD,GAnBK,CAAN;AAoBD,CArBM,C,CAuBP;AACA;AACA;AACA","sourcesContent":["import { beginTransaction } from \"~/core/database\";\nimport * as helpers from \"~/helpers\";\n\nexport const update = async ({ userId, name, password }) => {\n  await beginTransaction(async trans => {\n    if (password) {\n      trans.update(\n        `\n          update users set password = ? where id = ?\n        `,\n        [await helpers.password.hash(password), userId]\n      );\n    }\n\n    await trans.update(\n      `\n      update admin\n        set name = ?,\n        modifiedAt = now()\n      where userId = ?\n      `,\n      [name, userId]\n    );\n  });\n};\n\n// async () => {\n//   console.log(\"AAQQQQQQQUIIIIIIIIIIIIIIIIIIIIIIIIII\");\n//\n// },\n"],"file":"update.js"}